@font-face {
  font-family: 'Roboto Slab';
  font-style: normal;
  font-weight: 400;
  src: url('../fonts/roboto-slab-v34-latin-regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Roboto Slab';
  font-style: normal;
  font-weight: 700;
  src: url('../fonts/roboto-slab-v34-latin-700.woff2') format('woff2');
}

@font-face {
  font-family: 'Special Elite';
  font-style: normal;
  font-weight: 400;
  src: url('../fonts/special-elite-v19-latin-regular.woff2') format('woff2');
}
/* --- Global Styles & Reset --- */
* {
    box-sizing: border-box;
}
body {
    font-family: 'Roboto Slab', serif;
    background-color: #f4f1e8; /* Parchment/Aged paper */
    color: #222;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding-bottom: 80px; /* Für Sticky Footer, Wert an Footer-Höhe anpassen */
    padding-bottom: 90px;
}

#app-container {
    width: 100%;
    max-width: 800px;
    background-color: #fff;
    border: 1px solid #ccc;
    box-shadow: 3px 3px 10px rgba(0,0,0,0.1);
    padding: 20px 30px;
    border-radius: 3px; /* Slight rounding for document feel */
}

/* --- Header & Language Switcher --- */
header {
    border-bottom: 2px solid #555;
    padding-bottom: 10px;
    margin-bottom: 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
header h1 {
    font-family: 'Special Elite', cursive;
    color: #000;
    margin: 0;
    font-size: 1.8em;
}
#language-switcher button {
    font-family: 'Roboto Slab', serif;
    background: none;
    border: 1px solid #aaa;
    padding: 5px 10px;
    margin-left: 5px;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
}
#language-switcher button.active {
    background-color: #475c47; /* Darker, desaturated green */
    color: white;
    border-color: #475c47;
}
#language-switcher button:not(.active):hover {
    background-color: #e0e0e0;
}

/* --- Progress Bar --- */
#progress-bar-container {
    text-align: center;
    margin-bottom: 20px;
    font-size: 0.9em;
    color: #555;
}

/* --- Step Content & Forms --- */
.step {
    animation: fadeIn 0.4s ease-in-out;
    margin-bottom: 20px;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}
.info-box {
    background-color: #e9efeB; /* Light, slightly greenish grey */
    border-left: 4px solid #5a7a5a; /* Darker green accent */
    padding: 12px 18px;
    margin-bottom: 20px;
    font-size: 0.95em;
    border-radius: 2px;
}
.info-box p:first-child { margin-top: 0; }
.info-box p:last-child { margin-bottom: 0; }

h2, h3 {
    font-family: 'Special Elite', cursive;
    margin-top: 25px;
    margin-bottom: 15px;
    color: #333;
}
h2 { font-size: 1.5em; }
h3 { font-size: 1.3em; }

label {
    display: block;
    margin-bottom: 6px;
    font-weight: bold;
    color: #444;
}
input[type="text"],
input[type="number"],
select {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: 1px solid #ccc;
    background-color: #fdfdfd;
    /* box-sizing: border-box; -- Wurde durch * {} ersetzt */
    font-family: 'Roboto Slab', serif;
    border-radius: 2px;
    transition: border-color 0.2s;
}
input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
    border-color: #5a7a5a;
    outline: none;
    box-shadow: 0 0 0 2px rgba(90, 122, 90, 0.2);
}
select {
    appearance: none;
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M5%208l5%205%205-5z%22%20fill%3D%22%23555%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 12px;
    padding-right: 30px;
}
input[type="radio"], input[type="checkbox"] {
    margin-right: 8px;
    vertical-align: middle;
}
.inline-label {
    font-weight: normal;
    margin-right: 15px;
    display: inline-block;
}

/* --- Skill List Styling (Step 1.3) --- */
.skill-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 5px; 
    border-bottom: 1px dotted #ddd;
}
.skill-list-item:last-child {
    border-bottom: none;
}
.skill-name-container {
    display: flex;
    align-items: center;
    flex-grow: 1;
    margin-right: 10px; 
}
.skill-name {
    margin-right: 8px;
}
 .skill-type-input-inline { 
    width: 150px;
    margin-left: 8px;
    font-size: 0.9em;
    padding: 3px 5px;
    border: 1px solid #ccc;
    border-radius: 2px;
}
.skill-info-icon {
    cursor: help; color: #5a7a5a; font-size: 0.85em; border: 1px solid #99b099;
    border-radius: 50%; width: 18px; height: 18px; display: inline-flex;
    justify-content: center; align-items: center; position: relative;
    font-weight: bold; transition: background-color 0.2s;
}
.skill-info-icon:hover { background-color: #dde5dd; }
.tooltip {
    visibility: hidden; width: 220px; background-color: #2b2b2b; color: #f0f0f0;
    text-align: left; border-radius: 4px; padding: 8px 12px; position: absolute;
    z-index: 10; bottom: 130%; left: 50%; margin-left: -110px; opacity: 0;
    transition: opacity 0.3s, visibility 0s 0.3s; font-size: 0.9em;
    line-height: 1.4; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
.skill-info-icon:hover .tooltip { visibility: visible; opacity: 1; transition-delay: 0s; }
.skill-value-controls { display: flex; align-items: center; flex-shrink: 0; }
.skill-value { font-weight: bold; min-width: 35px; text-align: right; margin-right: 5px; }
.skill-increase-count { font-size: 0.8em; color: #666; min-width: 60px; text-align: left; margin-right: 8px; }
.skill-increase-button, .skill-decrease-button {
    padding: 3px 7px; font-size: 0.8em; border: 1px solid #ccc;
    cursor: pointer; border-radius: 2px; transition: background-color 0.2s;
}
.skill-increase-button { background-color: #e8e8e8; }
.skill-decrease-button { background-color: #f0e0e0; margin-right: 4px; }
.skill-increase-button:hover:not(:disabled) { background-color: #d8d8d8; }
.skill-decrease-button:hover:not(:disabled) { background-color: #e0d0d0; }
.skill-increase-button:disabled, .skill-decrease-button:disabled { opacity: 0.5; cursor: not-allowed; }

/* --- Profession Specific Choices (Step 1.2) --- */
#profession-details ul { list-style-type: none; padding-left: 0; }
#profession-details li { margin-bottom: 8px; }
#profession-details input[type="text"].skill-type-input {
    width: auto; min-width: 150px; margin-left: 10px; padding: 6px; font-size: 0.9em;
}

/* --- Custom Profession (Step 1 Custom) --- */
.custom-skill-item-base > .base-skill-line {
    display: flex; justify-content: space-between; align-items: center; padding: 8px 0;
}
.custom-skill-item-base > .base-skill-line > div:first-child { display: flex; align-items: center; }
#custom-profession-skill-list .skill-instance-controls {
    display: flex; flex-wrap: nowrap; align-items: center; gap: 5px; padding: 5px 0;
    margin-left: 25px; border-left: 2px solid #eee; margin-top: 5px;
    font-size: 0.85em; min-height: 34px;
}
#custom-profession-skill-list .custom-instance-type-input,
#custom-profession-skill-list .custom-instance-type-input-placeholder {
    flex-grow: 0; flex-shrink: 0; width: 130px; padding: 6px; font-size: 1em;
}
#custom-profession-skill-list .custom-instance-type-input-placeholder {
    margin-right: 5px; border: 1px solid transparent; line-height: normal;
}
#custom-profession-skill-list .skill-instance-controls > span:first-of-type { white-space: nowrap; margin-right: 3px; flex-shrink: 0; }
#custom-profession-skill-list .custom-skill-point-btn { padding: 3px 6px; font-size: 0.9em; line-height: 1.2; min-width: auto; flex-shrink: 0; }
#custom-profession-skill-list .custom-skill-assigned-points { min-width: 20px; text-align: center; font-weight: bold; margin: 0 3px; flex-shrink: 0; }
#custom-profession-skill-list .skill-instance-controls .custom-skill-total-value { white-space: nowrap; font-weight: bold; margin-left: 5px; flex-shrink: 0; }
#custom-profession-skill-list .skill-instance-controls .remove-custom-skill-instance-btn { margin-left: auto; padding: 0 4px; flex-shrink: 0; font-size: 1.1em; line-height: 1; }
@media (max-width: 750px) {
    #custom-profession-skill-list .skill-instance-controls { flex-wrap: wrap; gap: 8px; }
    #custom-profession-skill-list .custom-instance-type-input,
    #custom-profession-skill-list .custom-instance-type-input-placeholder { width: calc(100% - 10px); margin-bottom: 5px; }
    #custom-profession-skill-list .skill-instance-controls > span:first-of-type { width: 100%; text-align: left; margin-bottom: 3px; }
    #custom-profession-skill-list .skill-instance-controls .custom-skill-total-value { width: 100%; text-align: left; margin-top: 5px; margin-left: 0; }
}
.custom-prof-actions-container { display: flex; justify-content: flex-end; margin-top: 20px; }
#btn-confirm-custom-skills { margin-top: 0; }
label.disabled-choice { opacity: 0.6; cursor: not-allowed; }
label.disabled-choice input[type="checkbox"] { cursor: not-allowed; }


/* --- Statistics Allocation (Step 2) --- */
.stat-allocation-row { display: flex; justify-content: space-between; margin-bottom: 10px; align-items: center; }
.stat-allocation-row label { width: auto; min-width:120px; margin-bottom:0; }
.stat-allocation-row select { width: 100px; margin-bottom: 0; }
.stat-allocation-row .stat-percentile { width: 60px; text-align: right; font-weight: bold; }
.distinguishing-feature-input-container { margin-top: 5px; margin-bottom: 10px; }
.distinguishing-feature-input-container label.distinguishing-feature-label { font-size: 0.9em; font-weight: normal; margin-bottom: 3px;}
.distinguishing-feature-input { width:100%; font-size: 0.9em; }
.pointbuy-stat-row label { width: auto; min-width: 160px; margin-bottom:0; font-weight:bold; }
.pointbuy-stat-row input[type="number"] { width: 70px; margin: 0 5px 0 auto; text-align:center; padding: 6px; font-size:1em; margin-bottom:0; }
.pointbuy-stat-row .stat-percentile { font-weight:bold; min-width:40px; text-align:right; }
.manual-entry-stat-row label { width: auto; min-width: 160px; margin-bottom:0; font-weight:bold; }
.manual-entry-stat-row input[type="number"] { width: 70px; margin: 0 5px 0 auto; text-align:center; padding: 6px; font-size:1em; margin-bottom:0; }
.manual-entry-stat-row .stat-percentile { font-weight:bold; min-width:40px; text-align:right; }

/* --- Derived Attributes (Step 3) --- */
.derived-attributes-display { margin-top: 20px; border-top: 1px solid #ccc; }
.derived-attr-row { display: flex; align-items: flex-start; padding: 10px 0; border-bottom: 1px dotted #eee; }
.derived-attr-row:last-child { border-bottom: none; }
.derived-attr-row > :nth-child(1) { flex-basis: 200px; flex-shrink: 0; font-weight: bold; text-align: right; padding-right: 15px; }
.derived-attr-row > :nth-child(2) { flex-basis: 60px; flex-shrink: 0; font-weight: bold; text-align: center; }
.derived-attr-row > :nth-child(3) { flex-grow: 1; font-size: 0.9em; color: #555; padding-left: 15px; line-height: 1.4; }
.derived-attr-header > strong { font-weight: bold; color: #333; }
.derived-attr-header > :nth-child(1) { text-align: right; }
.derived-attr-header > :nth-child(2) { text-align: center; }
.derived-attr-header > :nth-child(3) { text-align: left; }

/* --- Bonds & Motivations (Step 4) --- */
.bond-entry, .motivation-entry { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #eee; }
.bond-entry:last-child, .motivation-entry:last-child { border-bottom: none; }
.bond-entry label, .motivation-entry label { display: block; margin-bottom: 3px; font-size: 0.95em; }
.bond-entry input[type="text"] { margin-bottom: 5px; }
.bond-entry span[data-i18n="bond_score_label"] + span { font-weight: bold; margin-left: 5px; }

/* --- Summary Page (Step 5) --- */
#step5-summary h3.summary-block-title {
    background-color: #333; color: white; padding: 8px 15px;
    margin: -15px -20px 15px -20px; font-family: 'Special Elite', cursive;
    font-size: 1.2em; text-transform: uppercase; letter-spacing: 1px;
    border-top-left-radius: 3px; border-top-right-radius: 3px;
}
#step5-summary h4.summary-subsection-title {
    font-family: 'Special Elite', cursive; font-size: 1.1em; margin-top: 20px;
    margin-bottom: 8px; color: #444; border-bottom: 1px solid #ddd; padding-bottom: 5px;
}
#step5-summary h4.summary-subsection-title:first-of-type { margin-top: 0; }
.summary-block {
    background-color: #f9f9f9; border: 1px solid #ccc; border-radius: 3px;
    padding: 15px 20px; margin-bottom: 25px;
}
.summary-personal-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 8px 20px; font-size: 0.95em;
}
.summary-personal-grid div { padding: 2px 0; display: flex; flex-wrap: nowrap; align-items: baseline; }
.summary-personal-grid strong { display: inline-block; min-width: 100px; margin-right: 5px; white-space: nowrap;}
span.placeholder-field { display: inline-block; border-bottom: 1px solid #aaa; min-width: 100px; flex-grow:1; height: 1.2em; vertical-align: bottom; }
span.placeholder-field.long { min-width: 150px; }
span.placeholder-field.short { min-width: 60px; }
span.value-field { font-weight: normal; color: #222; flex-grow:1; word-break: break-word; }

.summary-grid-stats-psych { display: grid; gap: 25px; margin-bottom: 25px; grid-template-columns: 1fr; }
@media (min-width: 768px) {
    .summary-grid-stats-psych { grid-template-columns: 1fr 1fr; }
}
.summary-table { width: 100%; border-collapse: collapse; font-size: 0.9em; margin-bottom: 15px; }
.summary-table th, .summary-table td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; vertical-align: top; }
.summary-table th { background-color: #e9e9e9; font-weight: bold; }
.summary-table td.value-cell { text-align: center; font-weight: bold; }
.summary-derived-table td.placeholder-cell { min-width: 60px; background-color: #fdfdfd; }

ul.summary-list { list-style-type: none; padding-left: 0; font-size: 0.95em; }
ul.summary-list li { padding: 3px 0; border-bottom: 1px dotted #eee; }
ul.summary-list li:last-child { border-bottom: none; }

/* Skills - Summary Section */
.summary-block-skills .summary-skills-multicolumn { /* Dieser Div ist der direkte Parent der UL */
    margin-top: 0;
    border-top: none;
    padding-top: 0;
}
.summary-skills-multicolumn ul.skills-flat-list { /* Die UL, die die LIs enthält */
    list-style-type: disc;
    padding-left: 20px; /* Für die Aufzählungspunkte */
    margin: 0;
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Standard: 3 Spalten */
    gap: 0px 20px; /* Kein vertikaler Gap, 20px horizontal */
    align-items: start;
}
/* Responsive Anpassung der Spalten für Skills in der Zusammenfassung */
@media (max-width: 750px) {
    .summary-skills-multicolumn ul.skills-flat-list {
        grid-template-columns: repeat(2, 1fr); /* 2 Spalten */
    }
}
@media (max-width: 520px) {
    .summary-skills-multicolumn ul.skills-flat-list {
        grid-template-columns: 1fr; /* 1 Spalte */
    }
}
.summary-skills-multicolumn ul.skills-flat-list li {
    padding: 2px 0; 
    font-size: 0.9em; 
    word-break: break-word;
}
.summary-skills-multicolumn .base-value {
    font-size: 0.85em;
    color: #666;
    margin-left: 4px;
}
.summary-actions .action-button { margin-right: 10px; margin-top:15px; }
/* Bestehendes .summary-table Styling (wird als Basis wiederverwendet) */
.summary-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85em; /* Schriftgröße leicht reduziert für mehr Kompaktheit */
    margin-bottom: 10px; /* Weniger Abstand unter den Tabellen */
}
.summary-table th, .summary-table td {
    border: 1px solid #ddd;
    padding: 4px 6px; /* Padding reduziert (war 6px 8px) */
    text-align: left;
    vertical-align: middle; /* Vertikal zentrieren kann kompakter wirken */
}
.summary-table th {
    background-color: #e9e9e9;
    font-weight: bold;
}
.summary-table td.value-cell {
    text-align: center;
    font-weight: bold;
}

/* Speziell für die "Current"-Zellen in der Derived Attributes Tabelle */
.summary-derived-table td.placeholder-cell {
    min-width: 50px; /* Etwas schmaler, wenn nötig */
    background-color: #fdfdfd;
    height: 1.5em; /* Feste Höhe, um die Zeilenhöhe zu kontrollieren, an Schrift anpassen */
    line-height: 1.5em; /* Stellt sicher, dass Text darin zentriert ist, falls mal welcher kommt */
}

/* Optional: Schriftgröße der Unterüberschriften auch leicht reduzieren */
#step5-summary h4.summary-subsection-title {
    font-size: 1.05em; /* War 1.1em */
    margin-top: 15px;  /* War 20px */
    margin-bottom: 6px;  /* War 8px */
    padding-bottom: 4px; /* War 5px */
}


/* --- Sticky Footer Navigation --- */
#sticky-nav-footer {
    position: fixed; left: 0; bottom: 0; width: 100%;
    background-color: #e8e4d9;
    border-top: 1px solid #c5bfb0;
    padding: 8px 15px;
    box-shadow: 0 -2px 5px rgba(0,0,0,0.08);
    z-index: 1000;
}
#navigation-container-wrapper {
    display: flex; justify-content: space-between; align-items: center;
    max-width: 800px; margin: 0 auto;
}
/* ▼▼▼ CSS FÜR #navigation-container (URSPRÜNGLICH UND JETZT STICKY) ▼▼▼ */
#navigation-container {
    /* Ursprüngliche Styles für Abstand und interne Anordnung: */
    margin-top: 30px;
    display: flex;
    justify-content: space-between;
    border-top: 2px solid #eee;
    padding-top: 20px;

    /* NEU: Styles, um es sticky am unteren Rand zu machen */
    position: fixed;
    margin-left:25%;
    left: 0;
    bottom: 0;
    width: 50%;
    background-color: #fefefe; /* Hintergrund passend zum Body oder eine andere Farbe */
    padding: 15px 30px; /* Padding anpassen, um app-container-Padding zu entsprechen */
    box-shadow: 0 -2px 5px rgba(0,0,0,0.1); /* Leichter Schatten oben */
    z-index: 1000; /* Über anderen Elementen */
    /* border-top von oben bleibt bestehen */

    /* Damit der Inhalt des #navigation-container sich an #app-container ausrichtet: */
    /* Dieses direkte Styling hier ist nicht ideal, besser wäre ein innerer Wrapper.
       Aber für eine schnelle Lösung, um es mit der max-width von app-container
       in Einklang zu bringen, ohne die HTML-Struktur stark zu ändern: */
}
footer {
    opacity: 0.7; /* War vorher 30%, vielleicht etwas lesbarer? */
    border-top-style: solid;
    border-width: thin;
    border-color: #ccc; /* Explizite Farbe für den Rand */
    margin-top: 25px;
    padding-top: 15px; /* Etwas Abstand über dem Text */
    font-style: italic;
    text-align: center; /* Zentriert den Copyright-Text */
}
footer p {
    margin: 0; /* Entfernt Standard-Margin vom p-Tag */
}

#sticky-nav-footer .nav-button {
    padding: 8px 18px;
    font-size: 0.85em;
    margin: 0;
}
.nav-button, .action-button { /* Diese Klasse gilt auch für btn-back/next */
    font-family: 'Roboto Slab', serif;
    background-color: #444;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 0.9em;
    letter-spacing: 0.5px;
    border-radius: 2px;
    transition: background-color 0.2s;
}
.nav-button:disabled {
    background-color: #aaa;
    cursor: not-allowed;
}
.nav-button:hover:not(:disabled), .action-button:hover {
    background-color: #222;
}
/* --- Print Styles --- */
@media print {
    body { padding: 0 !important; background-color: #fff !important; font-size: 10pt !important; color: #000 !important; padding-bottom: 0 !important; }
    #navigation-container { /* Die Navigationsleiste im Druck ausblenden */
        display: none !important;
    }
    #app-container { box-shadow: none !important; border: none !important; max-width: 100% !important; padding: 0 !important; }
    header, #sticky-nav-footer, footer, #language-switcher, #progress-bar-container, .summary-actions { display: none !important; }
    .info-box { border-left-width: 2px !important; padding: 8px 10px !important; background-color: #f8f8f8 !important; }
    h1, h2, h3 { margin-top: 15px !important; margin-bottom: 8px !important; color: #000 !important; }
    .summary-block { border: 1px solid #666 !important; margin-bottom: 15px !important; padding: 10px 15px !important; background-color: #fff !important; }
    #step5-summary h3.summary-block-title { background-color: #ccc !important; color: #000 !important; margin: -10px -15px 10px -15px !important; font-size: 1.1em !important;}
    .summary-grid-stats-psych {
        /* Attempt to keep two columns for print if content is not too wide */
        grid-template-columns: 1fr 1fr !important; 
        gap: 10px !important; /* Reduce gap for print */
    }
    .summary-table { font-size: 8.5pt !important; }
    .summary-table th, .summary-table td { padding: 4px 6px !important;}
    
    /* Skills im Druck - IMMER 3 Spalten */
    .summary-skills-multicolumn ul.skills-flat-list {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0 10px !important;
        font-size: 8.5pt !important;
        padding-left: 20px !important;
        list-style-type: disc !important;
    }
    .summary-skills-multicolumn ul.skills-flat-list li {
        padding: 1px 0 !important;
        font-size: 8.5pt !important; /* Überschreibt ggf. das ul-font-size */
        margin-bottom: 1px !important;
    }
    .summary-table {
        font-size: 8pt !important; /* Noch kleiner für Druck, falls nötig */
        margin-bottom: 8px !important;
    }
    .summary-table th, .summary-table td {
        padding: 3px 5px !important; /* Noch kleineres Padding für Druck */
    }
    .summary-derived-table td.placeholder-cell {
        height: 1.4em !important; /* Höhe an 8pt Schrift anpassen */
        line-height: 1.4em !important;
        min-width: 40px !important;
    }
    #step5-summary h4.summary-subsection-title {
        font-size: 1em !important; /* Oder 10pt */
        margin-top: 10px !important;
        margin-bottom: 5px !important;
    }
    .summary-skills-multicolumn .base-value {
        font-size: 0.9em; /* Relativ zu 8.5pt */
    }
    footer { /* Den normalen Footer im Druck auch ausblenden */
        display: none !important;
    }
}
